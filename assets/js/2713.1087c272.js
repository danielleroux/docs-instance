"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2713],{12713:(t,e,i)=>{i.r(e),i.d(e,{ix_category_filter:()=>a});var o=i(98139),r=i(49088),s=i(91162);const a=class{constructor(t){(0,o.r)(this,t),this.inputChanged=(0,o.c)(this,"inputChanged",7),this.filterChanged=(0,o.c)(this,"filterChanged",7),this.ID_CUSTOM_FILTER_VALUE="CW_CUSTOM_FILTER_VALUE",this.categoryLogicalOperator=s.L.EQUAL,this.filterTokens=[],this.nonSelectableCategories={},this.icon="search",this.repeatCategories=!0,this.tmpDisableScrollIntoView=!0,this.labelCategories="Categories",this.i18nPlainText="Filter by text",this.documentClickCallback=this.handleDocumentClick.bind(this)}watchFilterState(t){this.setFilterState(t)}watchShowCategorySelection(t){t?document.addEventListener("click",this.documentClickCallback):document.removeEventListener("click",this.documentClickCallback)}setDropdownOffset(){const t=this.calculateDropdownHeight();this.maxHeightDropdown=(0,r.a)(t)}componentDidLoad(){var t,e;void 0!==this.initialState?this.setFilterState(this.initialState):void 0!==this.filterState&&this.setFilterState(this.filterState),null===(t=this.hostElement)||void 0===t||t.addEventListener("keydown",this.handleFormElementKeyDown.bind(this)),null===(e=this.formElement)||void 0===e||e.addEventListener("submit",(t=>t.preventDefault())),null!=this.textInput?(this.textInput.addEventListener("click",(()=>this.showCategorySelection=!0)),this.textInput.addEventListener("focusin",(()=>{this.hasFocus=!0})),this.textInput.addEventListener("focusout",(()=>this.hasFocus=!1)),this.textInput.addEventListener("input",(()=>{this.inputValue=this.textInput.value;const t=new s.I(this.inputValue,this.category);this.inputChanged.emit(t),this.showCategorySelection=!0})),this.textInput.addEventListener("keydown",this.handleInputElementKeyDown.bind(this))):console.warn("Core UI category filter - unable to add event listeners to native input element")}setFilterState(t){this.filterTokens=[];for(const e of t.tokens)this.addToken(e,this.ID_CUSTOM_FILTER_VALUE,this.categoryLogicalOperator,!1);for(const e of t.categories)this.addToken(e.value,e.id,e.operator,!1);this.emitFilterEvent()}handleDocumentClick(t){const e=t.target;this.hostElement.contains(e)||this.closeDropdown()}closeDropdown(){this.showCategorySelection=!1,this.category=void 0}handleFormElementKeyDown(t){switch(t.code){case"Enter":case"NumpadEnter":if(this.category||document.activeElement.classList.contains("plain-text-suggestion")){const t=document.activeElement.getAttribute("data-id");this.addToken(t,this.category)}else document.activeElement.classList.contains("category-item-id")&&this.selectCategory(document.activeElement.getAttribute("data-id"));t.preventDefault();break;case"ArrowUp":this.focusPreviousItem(),t.preventDefault();break;case"ArrowDown":this.focusNextItem(),t.preventDefault();break;case"Escape":this.closeDropdown()}}focusPreviousItem(){const t=document.activeElement.previousSibling;t instanceof HTMLElement&&t.focus()}focusNextItem(){const t=document.activeElement.nextSibling;t instanceof HTMLElement&&t.focus()}handleInputElementKeyDown(t){var e;switch(t.code){case"ArrowDown":const i=".category-item-"+(this.category?"value":"id");let o=this.hostElement.querySelector(i);o instanceof HTMLElement?(o.focus(),t.stopPropagation()):(null===(e=this.suggestions)||void 0===e?void 0:e.length)&&(o=this.hostElement.querySelector(".category-item"),o instanceof HTMLElement&&(o.focus(),t.stopPropagation()));break;case"Backspace":if(""!==this.textInput.value)return;if(this.category)return void(this.category=void 0);const r=this.filterTokens.length;r>0&&this.removeToken(r-1);break;case"Enter":case"NumpadEnter":this.addToken(this.inputValue,this.category),t.preventDefault()}}emitFilterEvent(){const t={tokens:this.filterTokens.filter((t=>t.id===this.ID_CUSTOM_FILTER_VALUE)).map((t=>t.value)),categories:this.filterTokens.filter((t=>t.id!==this.ID_CUSTOM_FILTER_VALUE))};this.filterChanged.emit(t)}addToken(t,e,i,o){if(void 0===e&&(e=this.ID_CUSTOM_FILTER_VALUE),void 0===i&&(i=this.categoryLogicalOperator),void 0===o&&(o=!0),null==t)return;const r=t.trim();if(""===r)return;if(this.filterTokens.find((t=>(null==t?void 0:t.value)===r)))return;const a={id:e,value:r,operator:i};this.filterTokens=[...this.filterTokens,a],this.textInput.value="",this.inputValue="",this.categoryLogicalOperator=s.L.EQUAL,this.isScrollStateDirty=!0,this.textInput.focus(),o&&this.emitFilterEvent(),this.closeDropdown()}removeToken(t){this.filterTokens=this.filterTokens.filter(((e,i)=>i!==t)),this.emitFilterEvent()}getCategoryIds(){const t=[];for(const e in this.categories)Object.prototype.hasOwnProperty.call(this.categories,e)&&t.push(e);return t}getCategoryLables(){return this.getCategoryIds().map((t=>this.categories[t].label))}selectCategory(t){this.category=t,this.textInput.value="",this.inputValue="",this.textInput.focus()}openCategorySelection(){this.showCategorySelection=!0}resetFilter(){this.closeDropdown(),this.filterTokens=[],this.emitFilterEvent()}calculateDropdownX(){var t;if(!this.textInput)return 0;return this.textInput.getBoundingClientRect().x-(null===(t=this.formElement)||void 0===t?void 0:t.getBoundingClientRect().x)}calculateDropdownY(){return this.textInput?this.hostElement.getBoundingClientRect().height:32}calculateDropdownHeight(t){void 0===t&&(t=32);const e=this.hostElement.getBoundingClientRect().top+t;return window.innerHeight-e}filterMultiples(t){if(this.repeatCategories)return!0;return!this.filterTokens.find((e=>e.id===t))}filterDuplicateTokens(t){return!this.filterTokens.some((e=>e.value===t))}filterByInput(t){return void 0===this.inputValue||""===this.inputValue||-1!==t.toLowerCase().indexOf(this.inputValue.toLowerCase())}toggleCategoryOperator(){switch(this.categoryLogicalOperator){case s.L.EQUAL:this.categoryLogicalOperator=s.L.NOT_EQUAL;break;case s.L.NOT_EQUAL:this.categoryLogicalOperator=s.L.EQUAL}}getFilterChipLabel(t){var e,i,o;if(t.id===this.ID_CUSTOM_FILTER_VALUE)return t.value;const r=t.operator===s.L.EQUAL?"=":"!=";return`${null!==(o=null!==(i=null===(e=this.categories[t.id])||void 0===e?void 0:e.label)&&void 0!==i?i:this.nonSelectableCategories[t.id])&&void 0!==o?o:t.id} ${r} ${t.value}`}componentDidRender(){const t=this.calculateDropdownX(),e=this.calculateDropdownY(),i=(0,r.a)(t),o=(0,r.a)(e),s=this.hostElement.getBoundingClientRect().width-t,a=this.calculateDropdownHeight(e);this.maxWidthDropdown=(0,r.a)(s),this.maxHeightDropdown=(0,r.a)(a),i!==this.offsetDropdownX&&(this.offsetDropdownX=i),o!==this.offsetDropdownY&&(this.offsetDropdownY=o),this.isScrollStateDirty&&(this.tmpDisableScrollIntoView||this.textInput.scrollIntoView(),this.isScrollStateDirty=!1)}render(){var t,e,i,r,a,n;return(0,o.h)(o.H,null,(0,o.h)("form",{ref:t=>this.formElement=t},(0,o.h)("div",{class:{"form-control":!0,"input-container":!0,focus:this.hasFocus,"no-icon":this.hideIcon}},(0,o.h)("ix-icon",{class:{"d-none":this.hideIcon},name:this.icon,size:"16"}),(0,o.h)("div",{class:"token-container"},(0,o.h)("ul",{class:"list-unstyled"},this.filterTokens.map(((t,e)=>(0,o.h)("li",{class:{animate__animated:!0,animate__fadein:!0}},(0,o.h)("ix-filter-chip",{onCloseClick:()=>this.removeToken(e)},this.getFilterChipLabel(t))))),void 0===this.categories?"":(0,o.h)("li",{class:{"category-preview":!0,"d-none":!this.category}},null===(t=this.categories[this.category])||void 0===t?void 0:t.label),(0,o.h)("input",{class:{"text-input":!0,"hide-placeholder":void 0!==this.category},ref:t=>this.textInput=t,type:"text",placeholder:this.placeholder,onFocus:()=>this.openCategorySelection()}))),(0,o.h)("button",{class:{btn:!0,"btn-invisible-secondary":!0,"btn-oval":!0,"btn-close":!0,"d-none":!this.filterTokens.length&&!this.category},onClick:()=>this.resetFilter(),tabindex:"1"},(0,o.h)("span",{class:"glyph glyph-error glyph-16"})))),(0,o.h)("div",{class:{"category-selection-container":!0,"d-none":!this.showCategorySelection&&void 0===this.category},style:{left:this.offsetDropdownX,top:this.offsetDropdownY,"max-width":this.maxWidthDropdown,"max-height":this.maxHeightDropdown}},(0,o.h)("div",{class:{"d-none":!this.showCategorySelection||void 0!==this.category}},(0,o.h)("div",{class:{"category-item-header":!0,"d-none":0===this.getCategoryLables().filter((t=>this.filterByInput(t))).length}},this.labelCategories),null===(e=this.getCategoryIds())||void 0===e?void 0:e.filter((t=>this.filterByInput(this.categories[t].label))).filter((t=>this.filterMultiples(t))).map((t=>{var e;return(0,o.h)("div",{"data-id":t,title:t,class:"category-item category-item-id",onClick:()=>this.selectCategory(t),tabindex:"0"},null===(e=this.categories[t])||void 0===e?void 0:e.label)}))),(0,o.h)("div",{class:{"d-none":void 0===this.category}},(0,o.h)("button",{class:"btn btn-invisible-secondary btn-icon",onClick:()=>this.toggleCategoryOperator(),tabindex:"-1"},this.categoryLogicalOperator===s.L.NOT_EQUAL?"=":"!="),void 0===this.categories?"":(0,o.h)("div",{class:"category-item-header"},null===(i=this.categories[this.category])||void 0===i?void 0:i.label),void 0===this.categories?"":null===(r=this.categories[this.category])||void 0===r?void 0:r.options.filter((t=>this.filterByInput(t))).filter((t=>this.filterDuplicateTokens(t))).map((t=>(0,o.h)("div",{"data-id":t,title:t,class:"category-item category-item-value",onClick:()=>this.addToken(t,this.category),tabindex:"0"},`${this.categoryLogicalOperator===s.L.EQUAL?"=":"!="} ${t}`)))),(0,o.h)("div",{class:{"category-item-header":!0,"d-none":void 0!==this.category||this.getCategoryIds().filter((t=>this.filterByInput(t))).length>0}},this.i18nPlainText),(0,o.h)("div",{class:{"d-none":!(null===(a=this.suggestions)||void 0===a?void 0:a.length)||void 0!==this.category}},null===(n=this.suggestions)||void 0===n?void 0:n.filter((t=>this.filterByInput(t))).filter((t=>this.filterDuplicateTokens(t))).map((t=>(0,o.h)("div",{"data-id":t,class:"category-item plain-text-suggestion",onClick:()=>this.addToken(t),tabindex:"0"},t))))))}get hostElement(){return(0,o.g)(this)}static get watchers(){return{filterState:["watchFilterState"],showCategorySelection:["watchShowCategorySelection"]}}};a.style='@charset "UTF-8";.sc-ix-category-filter-h{display:block;position:relative}.sc-ix-category-filter-h .focus.sc-ix-category-filter{border-color:var(--theme-color-primary);box-shadow:0 0 0.25rem 0 var(--theme-color-primary) !important}.sc-ix-category-filter-h .btn-close.sc-ix-category-filter{position:absolute;top:0.25rem;right:0.25rem;min-width:1.5rem;width:1.5rem;height:1.5rem}.sc-ix-category-filter-h .input-container.sc-ix-category-filter{display:flex;height:100%;max-height:3.75rem;padding:1px 1.5rem 1px 2rem}.sc-ix-category-filter-h .input-container.no-icon.sc-ix-category-filter{padding-left:0.25rem}.sc-ix-category-filter-h .token-container.sc-ix-category-filter{flex-grow:1;overflow:hidden}.sc-ix-category-filter-h .text-input.sc-ix-category-filter{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-font-smoothing:antialiased;-moz-osx-font-smooting:grayscale;font-family:Siemens Sans, sans-serif;font-size:0.875rem;font-weight:400;line-height:1.429em;color:var(--theme-color-std-text);background:transparent;flex-grow:1;height:1.75rem}.sc-ix-category-filter-h .text-input.sc-ix-category-filter,.sc-ix-category-filter-h .text-input.sc-ix-category-filter:hover,.sc-ix-category-filter-h .text-input.sc-ix-category-filter:focus{border:none;outline:none}.sc-ix-category-filter-h .text-input.hide-placeholder.sc-ix-category-filter::-moz-placeholder{opacity:0}.sc-ix-category-filter-h .text-input.hide-placeholder.sc-ix-category-filter::placeholder{opacity:0}.sc-ix-category-filter-h .list-unstyled.sc-ix-category-filter{display:flex;flex-wrap:wrap;list-style:none;padding:0;margin:0;overflow-y:auto}.sc-ix-category-filter-h ix-icon.sc-ix-category-filter{position:absolute;top:0.5rem;left:0.5rem}.sc-ix-category-filter-h ix-filter-chip.sc-ix-category-filter{margin-right:0.5rem}.sc-ix-category-filter-h .category-preview.sc-ix-category-filter{display:flex;align-items:center;height:1.5rem;background-color:var(--theme-bg-3);border-top-left-radius:1rem;border-bottom-left-radius:1rem;padding:0.5rem;margin:2px 0}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter{box-shadow:var(--theme-box-shadow-level-1);background:var(--theme-color-1);position:absolute;top:2rem;overflow-y:auto;min-width:10rem;border:var(--theme-std-bdr-1);border-radius:0.25rem;padding:0.5rem;z-index:1}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item.sc-ix-category-filter,.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item-header.sc-ix-category-filter{-webkit-font-smoothing:antialiased;-moz-osx-font-smooting:grayscale;font-family:Siemens Sans, sans-serif;font-size:0.875rem;font-weight:400;line-height:1.143em;color:var(--theme-color-std-text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:2rem;padding:0.5rem}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item-header.sc-ix-category-filter{color:var(--theme-color-soft-text)}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item-id.sc-ix-category-filter{border-top-left-radius:1rem;border-bottom-left-radius:1rem}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item-value.sc-ix-category-filter{border-top-right-radius:1rem;border-bottom-right-radius:1rem}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item.sc-ix-category-filter{cursor:pointer}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .category-item.sc-ix-category-filter:focus{background-color:var(--theme-generic-bg-active);outline:none}.sc-ix-category-filter-h .category-selection-container.sc-ix-category-filter .plain-text-suggestion.sc-ix-category-filter{border-radius:1rem}.sc-ix-category-filter-h ul.sc-ix-category-filter{height:100%}.sc-ix-category-filter-h ul.sc-ix-category-filter>li.sc-ix-category-filter,.sc-ix-category-filter-h input.sc-ix-category-filter{padding-top:2px;padding-bottom:2px}'},49088:(t,e,i)=>{i.d(e,{a:()=>o,c:()=>r});const o=t=>`${t/16}rem`,r=t=>{if(isNaN(t)||null==t)return"";let e="";return[{unit:"q",value:Math.pow(10,15)},{unit:"t",value:Math.pow(10,12)},{unit:"B",value:Math.pow(10,9)},{unit:"M",value:Math.pow(10,6)},{unit:"K",value:Math.pow(10,3)}].some((i=>{let o=Math.abs(t);return o>=i.value&&(o/=i.value,t=Math.round(10*o)/10,e=i.unit,!0)})),t+e}}}]);